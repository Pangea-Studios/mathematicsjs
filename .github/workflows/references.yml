name: Docs References

on: push

jobs:
  copy-file:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3

    - name: Build Docs
      uses: actions/setup-node@v3
      with:
        node-version: '16.14'
    - run: npm install
    - run: npm run build
    - run: npm run build:doc

    - name: Pushes docs folder
      uses: andstor/copycat-action@v3
      with:
        personal_token: ${{ secrets.PERSONAL_TOKEN }}
        src_path: /docs/
        src_branch: main
        dst_path: /website/docs/reference/
        dst_branch: docs
        dst_owner: Pangea-Studios
        dst_repo_name: mathematicsjs